{"version":3,"file":"dfcf3a8d-e1540f841576ce9f474f.js","mappings":"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","sources":["webpack://nafeij.github.io/./src/components/NavBar.tsx"],"sourcesContent":["import { navLinks } from '@config'\nimport { css } from '@emotion/react'\nimport styled from '@emotion/styled'\nimport { SunIcon } from '@heroicons/react/24/outline'\nimport { MoonIcon } from '@heroicons/react/24/solid'\nimport { usePrefersReducedMotion, useScrollDirection } from '@hooks'\nimport { ThemeContext } from '@styles'\nimport { KEY_CODES, MediaContext } from '@util'\nimport { Link } from 'gatsby'\nimport { useCallback, useContext, useEffect, useState } from 'react'\nimport { Helmet } from 'react-helmet'\nimport tw from 'twin.macro'\nimport TransitionSeries, { genDelays } from './TransitionSeries'\nimport Button from './Button'\n\n// https://github.com/bchiang7/v4\n\nconst StyledHamburgerButton = styled.button<{ menuOpen: boolean }>`\n  @media (max-width: 768px) {\n    position: relative;\n    z-index: 10;\n    width: 1.75rem;\n    aspect-ratio: 1;\n    box-sizing: content-box;\n    padding: 0.25rem;\n    border: 0;\n    background-color: transparent;\n    color: inherit;\n    text-transform: none;\n    transition-timing-function: linear;\n    transition-duration: 0.15s;\n    transition-property: opacity, filter;\n  }\n\n  .ham-box {\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 80%;\n  }\n\n  .ham-box-inner {\n    position: absolute;\n    top: 50%;\n    right: 0;\n    width: 100%;\n    height: 2px;\n    border-radius: 4px;\n    background-color: var(--text-primary);\n    transition-duration: 0.22s;\n    transition-property: transform;\n    transition-delay: ${({ menuOpen }) => (menuOpen ? '0.12s' : '0s')};\n    transform: rotate(${({ menuOpen }) => (menuOpen ? '225deg' : '0deg')});\n    transition-timing-function: cubic-bezier(\n      ${({ menuOpen }) =>\n        menuOpen ? '0.215, 0.61, 0.355, 1' : '0.55, 0.055, 0.675, 0.19'}\n    );\n    &:before,\n    &:after {\n      content: \"\";\n      display: block;\n      position: absolute;\n      left: auto;\n      right: 0;\n      width: 100%;\n      height: 2px;\n      border-radius: 4px;\n      background-color: var(--text-primary);\n      transition-timing-function: ease;\n      transition-duration: 0.15s;\n      transition-property: transform;\n    }\n    &:before {\n      width: ${({ menuOpen }) => (menuOpen ? '100%' : '120%')};\n      top: ${({ menuOpen }) => (menuOpen ? '0' : '-10px')};\n      opacity: ${({ menuOpen }) => (menuOpen ? 0 : 1)};\n      transition: ${({ menuOpen }) =>\n        menuOpen\n          ? 'top 0.1s ease-out, opacity 0.1s ease-out 0.12s, width 0.34s'\n          : 'top 0.1s ease-in 0.25s, opacity 0.1s ease-in, width 0.34s'};\n    }\n    &:after {\n      width: ${({ menuOpen }) => (menuOpen ? '100%' : '80%')};\n      bottom: ${({ menuOpen }) => (menuOpen ? '0' : '-10px')};\n      transform: rotate(${({ menuOpen }) => (menuOpen ? '90deg' : '0')});\n      transition: ${({ menuOpen }) =>\n        menuOpen\n          ? 'bottom 0.1s ease-out, transform 0.1s ease-out 0.12s, width 0.34s'\n          : 'bottom 0.1s ease-in 0.25s, transform 0.22s cubic-bezier(0.55, 0.055, 0.675, 0.19), width 0.34s'};\n    }\n  }\n`\n\nconst StyledSidebar = styled.aside<{ menuOpen: boolean }>`\n  @media (max-width: 768px) {\n    display: flex;\n    position: fixed;\n    align-items: center;\n    justify-content: center;\n    top: 100%;\n    bottom: 0;\n    right: 0;\n    padding: 50px 10px;\n    width: min(75%, 400px);\n    height: 100vh;\n    background-color: var(--button-secondary);\n    box-shadow: -10px 0px 30px -15px #00000088;\n    outline: 0;\n    z-index: 9;\n    transform: translateY(-100%)\n      translateX(${({ menuOpen }) => (menuOpen ? 0 : 100)}%);\n    visibility: ${({ menuOpen }) => (menuOpen ? 'visible' : 'hidden')};\n    transition: var(--transition);\n  }\n\n  nav {\n    width: 100%;\n    flex-direction: column;\n    font-family: var(--font-mono);\n    text-align: center;\n    display: flex;\n    align-items: center;\n  }\n\n  ol {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    width: 100%;\n\n    li {\n      position: relative;\n      margin: 0 auto 20px;\n      counter-increment: item 1;\n\n      @media (max-width: 600px) {\n        margin: 0 auto 10px;\n      }\n\n      &:before {\n        content: \"0\" counter(item) \".\";\n        display: block;\n        margin-bottom: 5px;\n      }\n    }\n\n    a {\n      width: 100%;\n      padding: 3px 20px 20px;\n    }\n  }\n`\n\nconst StyledLinks = styled.div`\n  font-family: var(--font-mono);\n  display: none;\n\n  @media (min-width: 768px) {\n    display: block;\n  }\n\n  nav {\n    flex-direction: row;\n    display: flex;\n    gap: 1rem;\n\n    ol {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0;\n      margin: 0;\n      list-style: none;\n\n      li {\n        margin: 0 5px;\n        position: relative;\n        counter-increment: item 1;\n\n        a {\n          padding: 10px;\n\n          &:before {\n            content: \"0\" counter(item) \".\";\n            margin-right: 5px;\n            text-align: right;\n            color: var(--text-secondary);\n          }\n        }\n      }\n    }\n  }\n\n  .resume-button {\n    margin-left: 15px;\n  }\n`\n\nconst DarkButton = ({ toggleDark }: { toggleDark: () => void }) => {\n  const { isDark } = useContext(ThemeContext)\n  return (\n    <button\n      tw=\"z-10 flex aspect-square h-8 items-center justify-center border-0 bg-transparent outline-0 hover:scale-110 active:scale-90 md:h-10\"\n      css={{\n        '& > svg': [tw`h-full aspect-square text-[var(--text-primary)]`]\n      }}\n      onClick={toggleDark}\n    >\n      {isDark ? <MoonIcon /> : <SunIcon />}\n    </button>\n  )\n}\n\nconst Resume = () => (\n  <Button as=\"a\" href=\"/Resume_Jiefan.pdf\" className=\"resume-link\" target=\"_blank\" rel=\"noopener noreferrer\">\n    Resume\n  </Button>\n)\n\nconst ANIM_DURATION = 600\n\nconst innerDuration =\n  (ANIM_DURATION * (navLinks.length + 1)) / (navLinks.length + 3)\n\nexport default function NavBar ({\n  scrollRef,\n  toggleDark\n}: {\n  scrollRef: React.RefObject<HTMLDivElement>\n  toggleDark: () => void\n}) {\n  const [menuOpen, setMenuOpen] = useState(false)\n  const [scrolledToTop, setScrolledToTop] = useState(true)\n  const [overrideScroll, setOverrideScroll] = useState(false)\n  const { isMatch } = useContext(MediaContext)\n  const prefersReducedMotion = usePrefersReducedMotion()\n\n  const scrollDirection = useScrollDirection({\n    containerRef: scrollRef,\n    horizontal: !isMatch('md'),\n    thresholdPixels: 50,\n    off: overrideScroll\n  })\n\n  const handleScroll = useCallback(() => {\n    setOverrideScroll(false)\n    const scroll = scrollRef.current\n    // console.log(scroll?.scrollTop, scroll?.scrollLeft);\n    setScrolledToTop(\n      (scroll != null) ? scroll.scrollTop < 50 && scroll.scrollLeft < 50 : false\n    )\n  }, [scrollRef])\n\n  const toggleMenu = () => { setMenuOpen(!menuOpen) }\n\n  /*\n  const navRef = useRef<HTMLElement>(null);\n\n  const menuFocusables = useRef<HTMLAnchorElement[]>([]);\n  */\n\n  const onResize = () => {\n    if (window.innerWidth > 768) {\n      setMenuOpen(false)\n    }\n  }\n\n  /*\n  const handleBackwardTab = (e: KeyboardEvent) => {\n    if (document.activeElement === menuFocusables.current[0]) {\n      e.preventDefault();\n      menuFocusables.current[menuFocusables.current.length - 1].focus();\n    }\n  };\n\n  const handleForwardTab = (e: KeyboardEvent) => {\n    if (document.activeElement === menuFocusables.current[menuFocusables.current.length - 1]) {\n      e.preventDefault();\n      menuFocusables.current[0].focus();\n    }\n  };\n  */\n\n  const onKeyDown = (e: KeyboardEvent) => {\n    switch (e.key) {\n      case KEY_CODES.ESCAPE:\n      case KEY_CODES.ESCAPE_IE11: {\n        setOverrideScroll(false)\n        break\n      }\n      case KEY_CODES.TAB: {\n        setOverrideScroll(true)\n        break\n      }\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', onKeyDown)\n    window.addEventListener('resize', onResize)\n\n    const container = scrollRef.current\n    if (!prefersReducedMotion) {\n      handleScroll()\n      container?.addEventListener('scroll', handleScroll)\n    }\n\n    return () => {\n      if (!prefersReducedMotion) {\n        container?.removeEventListener('scroll', handleScroll)\n      }\n      document.removeEventListener('keydown', onKeyDown)\n      window.removeEventListener('resize', onResize)\n    }\n  }, [handleScroll, prefersReducedMotion, scrollRef])\n\n  const scrollstyle = () => {\n    if (!scrolledToTop) {\n      if (scrollDirection === 'forward') {\n        return `transform: translateY(${isMatch('md') ? '-100%' : '100%'});\n                box-shadow: 0 -10px 30px -10px #00000088;`\n      } else if (scrollDirection === 'backward') {\n        return `box-shadow: 0 -10px 30px -10px #00000088;\n                opacity: 1;\n                background-color: var(--bg-secondary);\n                padding-top: .5rem;\n                padding-bottom: .5rem;\n                @media (min-width: 768px) {\n                  padding-top: 1rem;\n                  padding-bottom: 1rem;\n                }\n                `\n      }\n    }\n  }\n\n  return (\n    <header\n      id=\"navbar\"\n      css={[\n        tw`w-full bottom-0 flex items-center overflow-visible justify-between fixed z-10 p-5 md:top-0 md:bottom-auto opacity-50 md:hover:opacity-100 lg:p-8`,\n        css`\n          ${genDelays(3, ANIM_DURATION)}\n          ${menuOpen && 'opacity: 1;'}\n          @media (prefers-reduced-motion: no-preference) {\n            transform: translateY(0);\n            ${scrollstyle()}\n          @media (prefers-reduced-motion: reduce) {\n            opacity: 1;\n            box-shadow: 0 -10px 30px -10px #0008;\n            background-color: var(--bg-secondary);\n          }\n        `\n      ]}\n    >\n      <Helmet>\n        <body data-filter={menuOpen ? 'blur' : ''} />\n      </Helmet>\n      <TransitionSeries duration={ANIM_DURATION} trigger={true}>\n        <StyledLinks>\n          <nav /* ref={navRef} */>\n            <ol css={genDelays(navLinks.length)}>\n              <TransitionSeries duration={innerDuration} trigger={true}>\n                {navLinks\n                  .map(({ url, name }, i) => (\n                    <li key={i}>\n                      <Link to={`/${url}`}>{name}</Link>\n                    </li>\n                  ))}\n              </TransitionSeries>\n            </ol>\n            <Resume />\n          </nav>\n        </StyledLinks>\n        <DarkButton toggleDark={toggleDark} />\n        <div tw=\"z-0 block md:hidden\">\n          <StyledHamburgerButton onClick={toggleMenu} menuOpen={menuOpen}>\n            <div className=\"ham-box\">\n              <div className=\"ham-box-inner\" />\n            </div>\n          </StyledHamburgerButton>\n          <StyledSidebar\n            menuOpen={menuOpen}\n            aria-hidden={!menuOpen}\n            tabIndex={menuOpen ? 1 : -1}\n          >\n            <nav>\n              <ol>\n                {navLinks.map(({ url, name }, i) => (\n                  <li key={i}>\n                    <Link\n                      to={`/${url}`}\n                      onClick={() => {\n                        setMenuOpen(false)\n                      }}\n                    >\n                      {name}\n                    </Link>\n                  </li>\n                ))}\n              </ol>\n              <div css={css`\n                background-color: var(--text-secondary);\n                margin: 1.75rem 0 2rem;\n                opacity: 0.4;\n                height: 1px;\n                width: 39%;\n              `} />\n              <Resume />\n            </nav>\n          </StyledSidebar>\n        </div>\n      </TransitionSeries>\n    </header>\n  )\n}\n"],"names":["StyledHamburgerButton","_styled","target","_ref2","menuOpen","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","StyledSidebar","_ref13","_ref14","StyledLinks","name","styles","DarkButton","_ref15","toggleDark","isDark","useContext","ThemeContext","_jsx","css","onClick","children","MoonIcon","SunIcon","Resume","Button","as","href","className","rel","ANIM_DURATION","innerDuration","navLinks","_ref","_ref18","NavBar","_ref16","scrollRef","setMenuOpen","useState","scrolledToTop","setScrolledToTop","overrideScroll","setOverrideScroll","isMatch","MediaContext","prefersReducedMotion","usePrefersReducedMotion","scrollDirection","useScrollDirection","containerRef","horizontal","thresholdPixels","off","handleScroll","useCallback","scroll","current","scrollTop","scrollLeft","onResize","window","innerWidth","onKeyDown","e","key","KEY_CODES","useEffect","document","addEventListener","container","removeEventListener","_jsxs","id","genDelays","scrollstyle","Helmet","TransitionSeries","duration","trigger","_ref17","i","url","Link","to","toggleMenu","tabIndex","_ref19"],"sourceRoot":""}